% Created by CM Lubinski. 
% https://github.com/cmc333333/forensics-thesis/blob/master/lstcoq.sty

% lstlisting coq style (inspired from a file of Assia Mahboubi)
%

%\usepackage{cmll} % Linear logic symbols
%\usepackage{ stmaryrd } % more math symbols
\usepackage{amsfonts}
\usepackage{braket}


\lstdefinelanguage{Coq}{ 
%
% Escape to LaTeX
%escapeinside={(|}{|)}, Bad choice with kets and parents
%
% Anything betweeen $ becomes LaTeX math mode
mathescape=true,
%
% Comments may or not include Latex commands
texcl=false, 
%
% Vernacular commands
morekeywords=[1]{Section, Module, End, Require, Import, Export,
  Variable, Variables, Parameter, Parameters, Axiom, Hypothesis,
  Hypotheses, Notation, Local, Tactic, Reserved, Scope, Open, Close,
  Bind, Delimit, Definition, Let, Ltac, Fixpoint, CoFixpoint, Add,
  Morphism, Relation, Implicit, Arguments, Unset, Contextual,
  Strict, Prenex, Implicits, Inductive, CoInductive, Record,
  Structure, Canonical, Coercion, Context, Class, Global, Instance,
  Program, Infix, Theorem, Lemma, Corollary, Proposition, Fact,
  Remark, Example, Proof, Goal, Save, Qed, Defined, Abort, Admitted, 
  Hint, Resolve, Rewrite, View, Search, Show, Print, Printing, All, 
  Eval, Check, Projections, inside, outside, Def},
%
% Gallina
% let keyword removed, since "let" is circuit syntax
morekeywords=[2]{forall, exists, exists2, fun, fix, cofix, struct,
  match, with, end, as, in, return, if, is, then, else, for, of,
  nosimpl, when},
%
% Sorts
morekeywords=[3]{Type, Prop, Set, true, false, option},
%
% Various tactics, some are std Coq subsumed by ssr, for the manual purpose
morekeywords=[4]{pose, set, move, case, elim, apply, clear, hnf,
  intro, intros, generalize, rename, pattern, after, destruct,
  induction, using, refine, inversion, injection, rewrite, congr,
  unlock, compute, replace, fold, unfold,
  change, cutrewrite, simpl, have, suff, wlog, suffices, without,
  loss, nat_norm, assert, cut, trivial, revert, bool_congr, nat_congr,
  symmetry, transitivity, auto, split, left, right, autorewrite},
%
% Terminators
morekeywords=[5]{by, done, exact, reflexivity, tauto, romega, omega,
  assumption, solve, contradiction, discriminate,
  ring, field, fourier, lra, clra, mlra},
%
% Control
morekeywords=[6]{do, last, first, try, idtac, repeat},
%
% Comments delimiters, we do turn this off for the manual
morecomment=[s]{(*}{*)},
%
% Spaces are not displayed as a special character
showstringspaces=false,
%
% String delimiters
% Quote delimiters turned off due to conflict with Coq notations and literate=*.
% morestring=[b]", 
morestring=[d],
%
% Size of tabulations
tabsize=3,
%
% Enables ASCII chars 128 to 255
extendedchars=true,
%
% Case sensitivity
sensitive=true,
%
upquote=true,
%
% Automatic breaking of long lines
breaklines=true,
%breakatwhitespace=true,
%
% Default style fors listings
basicstyle=\scriptsize\ttfamily,
%
% Position of captions is bottom
captionpos=b,
%
% flexible columns
columns=fullflexible,
keepspaces=true,
%
% Style for (listings') identifiers
identifierstyle={\ttfamily\color{black}},
% Style for declaration keywords
keywordstyle=[1]{\ttfamily\color{dkviolet}},
% Style for gallina keywords
keywordstyle=[2]{\ttfamily\color{dkgreen}},
% Style for sorts keywords
keywordstyle=[3]{\ttfamily\color{ltblue}},
% Style for tactics keywords
keywordstyle=[4]{\ttfamily\color{dkblue}},
% Style for terminators keywords
keywordstyle=[5]{\ttfamily\color{dkred}},
%Style for iterators
%keywordstyle=[6]{\ttfamily\color{dkpink}},
% Style for strings
stringstyle=\ttfamily,
% Style for comments
commentstyle={\ttfamily\color{dkgreen}},
%
%moredelim=**[is][\ttfamily\color{red}]{/&}{&/},
literate= %*
    {\\forall}{{\color{dkgreen}{$\forall\;$}}}1
    {\\exists}{{$\exists\;$}}1
    {forall}{{$\forall$}}1
    {∀}{{$\forall$}}1
    {exists}{{$\exists$}}1
    {>}{{$>$}}1 
    {<}{{$<$}}1 
    {=}{{$=$}}1 
    {≡}{{$\equiv$}}1
    {<>}{{$\neq$}}1              
    {==}{{\code{==}\;}}1
    {<-}{{$\leftarrow$}}1 
    {←}{{$\leftarrow$}}1   
    {->}{{$\rightarrow$}}1    
    {=>}{{$\Rightarrow$}}1
    {⇒}{{$\Rightarrow$}}1    
    {\\Rightarrow}{{$\Rightarrow$}}1
    {<=}{{$\leq$}}1
    {>=}{{$\geq$}}1
    {-<}{{$\leftY$}}1 
    {<<}{{$\ll$}}2 
    {>>}{{$\gg$}}2 
    {>>=}{{$>\!\!>\!\!=$}}2
    {<<<}{{$\lll$}}2 
    {>>>}{{$\ggg$}}2 
    {^<<}{{$\hat{}\!\!\ll$}}2 
    {^>>}{{$\hat{}\!\!\gg$}}2
    {==>}{{\code{==>}\;}}1
    {<->}{{$\leftrightarrow\;$}}2
    {<==}{{$\leq\;$}}1
    {=>>=}{{$\lbind$}}2
    {↦}{{$\mapsto\;$}}1
%{/=}{{$\neg$}}1    
%    {:>}{{\code{:>}\;}}1
%    {\#}{{$^\star$}}1  % what was this for?
%    {++}{{\code{++}}}1
    {\\o}{{$\circ\;$}}1 
    {\/\\}{{$\wedge\;$}}1
    {\\\/}{{$\vee\;$}}1
    {~}{{$\lnot$}}1
    {\@\@}{{$@$}}1
    {\\hline}{{\rule{\linewidth}{0.5pt}}}1
    {∘}{{$\circ$}}1
	{+}{{$+$}}1 {/}{{$/$}}1 
	%{*}{{$*$}}1 % This breaks comments (at least outside literate=*)!
	%{\\}{{$\lambda$}}1
	%{++}{{$+\!\!\!+$}}1
     {\\\\}{{\char`\\\char`\\}}1
               {⟩}{{$\rangle$}}1 
               {⟨}{{$\langle$}}1
               {undefined}{{$\bot$}}1
%               {not\ }{{$\neg$}}1
               {/\\}{{$\wedge$}}1
%               {^}{{$\wedge$}}2 nope! Need powers
			   {^*}{{${}^*$}}1
               {∧}{{$\wedge$}}2               
               {`elem`}{{$\in$}}1
               {⊢}{{$\vdash$}}2
               {\\C}{{$\mathbb{C}$}}1
               {nat}{{$\mathbb{N}$}}1
               {bool}{{$\mathbb{B}$}}1
               {Prop}{{$\mathbb{P}$}}1 % conflicts with Proposition
               {⋯}{{$\cdots$}}2
               {⊸}{{$\multimap$}}2
               {↝}{{$\leadsto$}}2
               {⊕}{{$\oplus$}}1
               {\\Cup}{{$\Cup$}}2
               {\\D}{{\$}}2
               {⋓}{{$\Cup$}}2
               {⊂}{{$\subset$}}2
			   {∪}{{$\cup$}}2
               {∙}{{$\cdot$}}2
               {∘}{{$\circ$}}2
               {∝}{{$\propto$}}2
               {∣}{{$\mid$}}1
               {∏}{{$\prod$}}2
%               {∅}{{$\emptyset$}}1
                {α}{{$\alpha$}}1
                {β}{{$\beta$}}1
                {δ}{{$\delta$}}1
                {ε}{{$\epsilon$}}1
                {θ}{{$\theta$}}1
                {φ}{{$\phi$}}1
                {ψ}{{$\psi$}}1
                {⇩}{{$\Downarrow$}}1
                {\\Gamma}{{$\Gamma$}}1
                {Γ}{{$\Gamma$}}1
                {\\Sigma}{{$\Sigma$}}1
                {Σ}{{$\Sigma$}}1
                {\\Gamma}{{$\Gamma$}}1
                {Π}{{$\Pi$}}1
                {\\Pi}{{$\Pi$}}1
                {\\rho}{{$\rho$}}1
                {ρ}{{$\rho$}}1
                {×}{{$\times$}}1
                {⊗}{{$\otimes$}}1
                {⨂}{{$\bigotimes$}}1
                {∙}{{$\bullet$}}1
				{√}{{$\surd$}}1
                {\\bigo}{{$\bigotimes$}}1                
                {\\lambda}{{$\lambda$}}1
                {λ}{{$\lambda$}}1
                {\\top}{{$\top$}}1
				{⊤}{{$\top$}}1
                {⊥}{{$\bot$}}1 
                {^⊤}{{${}^\top$}}1 
                {†}{{${}^\dagger$}}1
                {\\RR}{{$\mathbb{R}$}}1                
                {\\CC}{{$\mathbb{C}$}}1                
                {∥}{{$\|$}}1
			    {||}{{$\|$}}1
                {[[}{{$\llbracket$}}1    
                {]]}{{$\rrbracket$}}1  
                {]]u}{{$\rrbracket_u$}}1  
                {]]d}{{$\rrbracket_d$}}1  
                {〚}{{$\llbracket$}}1    
                {〛}{{$\rrbracket$}}1  
                {[[[}{{$\{\hspace{-0.2em}|$}}1    
                {]]]}{{$|\hspace{-0.2em}\}$}}1
                {]]]d}{{$|\hspace{-0.2em}\}_d$}}1
                {\\k0}{{$\ket{\text{0}}$}}1
                {\\k1}{{$\ket{\text{0}}$}}1
                {|0⟩}{{$\ket{\text{0}}$}}1
                {|1⟩}{{$\ket{\text{0}}$}}1
                {\\b0}{{$\bra{\text{0}}$}}1
                {\\b1}{{$\bra{\text{0}}$}}1
                {⟨0|}{{$\bra{\text{0}}$}}1
                {⟨1|}{{$\bra{\text{0}}$}}1
                {σx}{{$\mathtt{\sigma}_{\mathtt{x}}$}}1
                {σy}{{$\mathtt{\sigma}_{\mathtt{y}}$}}1
                {σz}{{$\mathtt{\sigma}_{\mathtt{z}}$}}1
                {σ}{{$\sigma$}}1
                {τ}{{$\tau$}}1
                {Ω}{{$\Omega$}}1
                {ϕ}{{$\varphi$}}1
                {Γ}{{$\Gamma$}}1               
                {Γ0}{{$\Gamma_{\mathtt{0}}$}}1 %length 2?
                {Γ1}{{$\Gamma_{\mathtt{1}}$}}1
                {Γ2}{{$\Gamma_{\mathtt{2}}$}}1
                {Γ3}{{$\Gamma_{\mathtt{3}}$}}1
                {Γ4}{{$\Gamma_{\mathtt{4}}$}}1
                {ρ0}{{$\rho_{\mathtt{0}}$}}1
                {ρ1}{{$\rho_{\mathtt{1}}$}}1
                {ρ2}{{$\rho_{\mathtt{2}}$}}1
                {W0}{{$\mathtt{W}_{\mathtt{0}}$}}1
                {W1}{{$\mathtt{W}_{\mathtt{1}}$}}1
                {W2}{{$\mathtt{W}_{\mathtt{2}}$}}1
                {W3}{{$\mathtt{W}_{\mathtt{2}}$}}1
                {C1}{{$\mathtt{C}_{\mathtt{1}}$}}1
                {C2}{{$\mathtt{C}_{\mathtt{2}}$}}1
                {Q1}{{$\mathtt{Q}_{\mathtt{1}}$}}1
                {Q2}{{$\mathtt{Q}_{\mathtt{2}}$}}1
                {new0}{{$\mathtt{new}_{\mathtt{0}}$}}1
                {new1}{{$\mathtt{new}_{\mathtt{1}}$}}1
                {newx}{{$\mathtt{new}_{\mathtt{x}}$}}1                
                {init0}{{$\mathtt{init}_{\mathtt{0}}$}}1
                {init1}{{$\mathtt{init}_{\mathtt{1}}$}}1
                {initx}{{$\mathtt{init}_{\mathtt{x}}$}}1
                {assert0}{{$\mathtt{assert}_{\mathtt{0}}$}}1
                {assert1}{{$\mathtt{assert}_{\mathtt{1}}$}}1
                {assertx}{{$\mathtt{assert}_{\mathtt{x}}$}}1
                {Uf}{{$\mathtt{U}_{\mathtt{f}}$}}1
                {U_f}{{$\mathtt{U}_{\mathtt{f}}$}}1
                {U__f}{{$\mathtt{U}_{\mathtt{f}}$}}1
                {c^-1}{{$c^{-1}$}}1
                {\\blank}{{ }}1
                {\\_}{{$\_$}}1
                {[b]_f}{{${\mathtt{\llbracket b \rrbracket_f}}$}}1
%                {2^n}{{$\mathtt{2}^{\mathtt{n}}$}}1 % too inconsistent
%                {_n}{{$_{\mathtt{n}}$}}1
%                {_m}{{$_{\mathtt{m}}$}}1
%                {''}{{"}}1
%                {'}{{$'$}}1
% redefined due to clashes:
                 {Γ13}{{$\Gamma_{\mathtt{13}}$}}3
                 {Γ14}{{$\Gamma_{\mathtt{14}}$}}3
                 {Γ23}{{$\Gamma_{\mathtt{23}}$}}3
                 {Γ24}{{$\Gamma_{\mathtt{24}}$}}3
				 {forallb}{{\texttt{forallb}}}7
				 {_nat}{{\texttt{\_nats}}}4
				 {nats}{{\texttt{nats}}}4
                 {alternate}{{\texttt{alternate}}}9
                 {bools}{{\texttt{bools}}}5
                 {boole}{{\texttt{boole}}}5
                 {bool_}{{\texttt{bool\_}}}5
                 {_bool}{{\texttt{\_bool}}}5
                 {Proposition}{{\color{dkviolet}\texttt{Proposition}}}{11}
}[keywords,comments,strings]

\lstnewenvironment{coq}{\lstset{language=Coq}}{}

% pour inliner dans le texte
\def\coqe{\lstinline[language=Coq, basicstyle=\small]}
% pour inliner dans les tableaux / displaymath...
\def\coqes{\lstinline[language=Coq, basicstyle=\scriptsize]}

%%% Local Variables: 
%%% mode: latex
%%% Local IspellDict: british
%%% TeX-master: "main.tex"
%%% End: 
